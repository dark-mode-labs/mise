{% assign scheme_class = '' %}
{% unless block.settings.inherit_scheme %}
  {% assign scheme_class = 'color-' | append: block.settings.color_scheme %}
{% endunless %}

<div class="group-block {{ scheme_class }} flex flex-col relative z-10 overflow-hidden transition-all bg-body"
     style="
       border-radius: {{ block.settings.border_radius }}px;
       padding: {{ block.settings.padding }}px;
       gap: {{ block.settings.gap }}px;
       align-items: {{ block.settings.align_items }};
       text-align: {{ block.settings.text_align }};
       {% if block.settings.shadow %}box-shadow: 0 4px 20px rgba(0,0,0,0.1);{% endif %}
       opacity: {{ block.settings.opacity | divided_by: 100.0 }};
     ">

  {% comment %} 
     If inherited, vars cascade from parent. 
     If overridden, vars are reset by the 'color-scheme-x' class above.
  {% endcomment %}
  {% content_for 'blocks' %}

</div>

{% schema %}
{
  "name": "Group (Container)",
  "settings": [
    {
      "type": "header",
      "content": "Theme Hierarchy"
    },
    {
      "type": "checkbox",
      "id": "inherit_scheme",
      "label": "Inherit Color Scheme",
      "default": true,
      "info": "Uncheck to enforce a specific scheme for this card."
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Gap (px)",
      "min": 0, "max": 60, "default": 16
    },
    {
      "type": "select",
      "id": "align_items",
      "label": "Alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" }
      ],
      "default": "flex-start"
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "padding",
      "label": "Padding (px)",
      "min": 0, "max": 80, "default": 24
    },
    {
      "type": "range",
      "id": "opacity",
      "label": "Opacity",
      "min": 0, "max": 100, "default": 100
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Radius",
      "min": 0, "max": 40, "default": 8
    },
    {
      "type": "checkbox",
      "id": "shadow",
      "label": "Show Shadow",
      "default": true
    }
  ],
  "blocks": [
    { "type": "@theme" }
  ]
}
{% endschema %}