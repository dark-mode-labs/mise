{% assign s = block.settings %}
{% capture scheme_class %}
  {% unless s.inherit_styles %}color-{{ s.color_scheme | default: 'none' }}{% endunless %}
{% endcapture %}

{% capture style_override %}
  {% unless s.inherit_styles %}
    {% if s.text_color_override %}
      --color-text: {{ s.custom_color }};
    {% endif %}
  {% endunless %}
{% endcapture %}

{% capture utilities %}
  {% if s.italic %}italic{% endif %}
  {% if s.enable_hyphens %}hyphens-auto{% endif %}
  {% case s.text_transform %}
    {% when 'uppercase' %}uppercase
    {% when 'capitalize' %}capitalize
    {% when 'lowercase' %}lowercase
  {% endcase %}
  {% case s.text_wrap %}
    {% when 'nowrap' %}whitespace-nowrap
    {% when 'balance' %}text-balance
  {% endcase %}
  {% case s.overflow_behavior %}
    {% when 'hidden' %}overflow-hidden
    {% when 'ellipsis' %}truncate
  {% endcase %}
{% endcapture %}

<div
  class="max-w-prose text-align-{{ s.text_align }} {{ scheme_class }}"
  style="{{ style_override }}"
  {{ context.attached_attributes }}
>
  {% render 'typography',
    text: s.content,
    tag: s.tag,
    display_size: s.display_size,
    weight: s.font_weight,
    class: utilities
  %}
</div>

{% schema %}
{
  "name": "Text",
  "settings": [
    {
      "type": "textarea",
      "id": "content",
      "label": "Content",
      "default": "Locally sourced ingredients."
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "select",
      "id": "tag",
      "label": "HTML Tag",
      "default": "div",
      "options": [
        { "value": "h1", "label": "H1" },
        { "value": "h2", "label": "H2" },
        { "value": "h3", "label": "H3" },
        { "value": "h4", "label": "H4" },
        { "value": "h5", "label": "H5" },
        { "value": "h6", "label": "H6" },
        { "value": "p", "label": "Paragraph" },
        { "value": "div", "label": "Div" },
        { "value": "span", "label": "Span" }
      ]
    },
    {
      "type": "select",
      "id": "display_size",
      "label": "Size",
      "default": "body",
      "options": [
        { "value": "h1", "label": "H1" },
        { "value": "h2", "label": "H2" },
        { "value": "h3", "label": "H3" },
        { "value": "h4", "label": "H4" },
        { "value": "h5", "label": "H5" },
        { "value": "h6", "label": "H6" },
        { "value": "display", "label": "Display" },
        { "value": "body", "label": "Body" },
        { "value": "caption", "label": "Caption" },
        { "value": "small", "label": "Small" }
      ]
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Alignment",
      "options": [
        { "value": "", "label": "Inherit" },
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": ""
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "Weight",
      "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "medium", "label": "Medium" },
        { "value": "bold", "label": "Bold" }
      ],
      "default": "normal"
    },
    {
      "type": "checkbox",
      "id": "italic",
      "label": "Italic",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_hyphens",
      "label": "Hyphenate",
      "default": false
    },
    {
      "type": "header",
      "content": "Layout & Style"
    },
    {
      "type": "select",
      "id": "text_transform",
      "label": "Text Transform",
      "default": "none",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "uppercase", "label": "Uppercase" },
        { "value": "capitalize", "label": "Capitalize" },
        { "value": "lowercase", "label": "Lowercase" }
      ]
    },
    {
      "type": "select",
      "id": "text_wrap",
      "label": "Text Wrapping",
      "default": "wrap",
      "options": [
        { "value": "wrap", "label": "Wrap" },
        { "value": "nowrap", "label": "No Wrap" },
        { "value": "balance", "label": "Balance" }
      ]
    },
    {
      "type": "select",
      "id": "overflow_behavior",
      "label": "Overflow",
      "default": "visible",
      "options": [
        { "value": "visible", "label": "Visible" },
        { "value": "hidden", "label": "Hidden (Clip)" },
        { "value": "ellipsis", "label": "Ellipsis (Truncate)" }
      ]
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "checkbox",
      "id": "inherit_styles",
      "label": "Inherit Global Styles",
      "default": true
    },
    {
      "type": "header",
      "content": "Overrides",
      "conditional": "setting.inherit_styles != true"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Palette",
      "default": "default",
      "conditional": "setting.inherit_styles != true"
    },
    {
      "type": "checkbox",
      "id": "text_color_override",
      "label": "Override Text Color",
      "default": false,
      "conditional": "setting.inherit_styles != true"
    },
    {
      "type": "color",
      "id": "custom_color",
      "label": "Custom Color",
      "default": "#ffffff",
      "conditional": "setting.inherit_styles != true and setting.text_color_override"
    }
  ]
}
{% endschema %}
