{% assign s = block.settings %}
{% capture scheme_class %}
  {% unless s.inherit_styles %}color-{{ s.color_scheme | default: 'none' }}{% endunless %}
{% endcapture %}

<div class="footer-block flex flex-col gap-4 {{ scheme_class }}">
  {% if s.heading != blank %}
    <h4 class="font-bold uppercase tracking-wider text-sm opacity-60">{{ s.heading }}</h4>
  {% endif %}

  {% if s.text != blank %}
    <p class="text-sm opacity-80">{{ s.text }}</p>
  {% endif %}

  <form action="/contact#footer-newsletter" method="POST" class="mt-2 relative">
    <input type="hidden" name="form_type" value="customer">
    <input type="hidden" name="contact[tags]" value="newsletter">

    <div class="relative group">
      <input
        type="email"
        name="contact[email]"
        placeholder="{{ s.email_placeholder }}"
        required
        class="w-full bg-transparent border-0 border-b border-current py-3 pr-10 placeholder-current/50 focus:ring-0 focus:border-current/100 transition-all outline-none"
      >

      <button
        type="submit"
        class="absolute right-0 top-1/2 -translate-y-1/2 hover:opacity-70 transition-opacity"
        aria-label="Subscribe"
      >
        {% render 'icon', name: 'arrow-right', class: 'w-4 h-4' %}
      </button>
    </div>
  </form>
</div>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Join the Club" },
    { "type": "text", "id": "text", "label": "Text", "default": "Exclusive events and seasonal menu updates." },
    { "type": "text", "id": "email_placeholder", "label": "Placeholder text", "default": "Email Address" },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "checkbox",
      "id": "inherit_styles",
      "label": "Inherit Styles",
      "default": true
    },
    {
      "type": "header",
      "content": "Overrides",
      "conditional": "setting.inherit_styles != true"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Palette",
      "default": "default",
      "conditional": "setting.inherit_styles != true"
    }
  ]
}
{% endschema %}
