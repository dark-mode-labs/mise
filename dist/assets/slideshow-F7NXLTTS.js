import"./chunk-I63RXT67.js";var r=class{constructor(t){this.el=t,this.track=this.el.querySelector(".slideshow-track"),this.prevBtn=this.el.querySelector(".slideshow-prev"),this.nextBtn=this.el.querySelector(".slideshow-next"),this.dots=this.el.querySelectorAll(".slideshow-dot"),this.infinite=this.el.dataset.infinite==="true",this.autoplayEnabled=this.el.dataset.autoplay==="true",this.speed=(parseInt(this.el.dataset.speed)||5)*1e3,this.interval=null,this.isDown=!1,this.startX=0,this.scrollLeft=0,this.init()}init(){this.track&&(this.prevBtn&&this.prevBtn.addEventListener("click",()=>this.prev()),this.nextBtn&&this.nextBtn.addEventListener("click",()=>this.next()),this.dots.forEach(t=>{t.addEventListener("click",s=>{this.scrollToIndex(parseInt(s.target.dataset.index)),this.stopAutoplay()})}),this.observer=new IntersectionObserver(this.onIntersect.bind(this),{root:this.track,threshold:.5}),Array.from(this.track.children).forEach(t=>this.observer.observe(t)),this.initDragPhysics(),this.autoplayEnabled&&(this.startAutoplay(),this.el.addEventListener("mouseenter",()=>this.stopAutoplay()),this.el.addEventListener("mouseleave",()=>this.startAutoplay())))}onIntersect(t){t.forEach(s=>{if(s.isIntersecting){let e=Array.from(this.track.children),i=e.indexOf(s.target);this.updateUI(i,e.length)}})}updateUI(t,s){this.dots.forEach((e,i)=>e.classList.toggle("is-active",i===t)),this.infinite||(this.prevBtn&&(this.prevBtn.disabled=t===0),this.nextBtn&&(this.nextBtn.disabled=t===s-1))}next(){let t=this.track.scrollWidth-this.track.clientWidth;this.track.scrollLeft>=t-10?this.infinite&&this.track.scrollTo({left:0,behavior:"smooth"}):this.track.scrollBy({left:this.track.clientWidth,behavior:"smooth"}),this.stopAutoplay()}prev(){this.track.scrollLeft<=10?this.infinite&&this.track.scrollTo({left:this.track.scrollWidth,behavior:"smooth"}):this.track.scrollBy({left:-this.track.clientWidth,behavior:"smooth"}),this.stopAutoplay()}scrollToIndex(t){let s=this.track.children[t];s&&s.scrollIntoView({behavior:"smooth",inline:"start",block:"nearest"})}startAutoplay(){this.stopAutoplay(),this.interval=setInterval(()=>this.next(),this.speed)}stopAutoplay(){clearInterval(this.interval)}initDragPhysics(){this.track.addEventListener("mousedown",t=>{this.isDown=!0,this.track.classList.add("cursor-grabbing"),this.track.classList.remove("scroll-smooth","snap-x"),this.startX=t.pageX-this.track.offsetLeft,this.scrollLeft=this.track.scrollLeft,this.stopAutoplay()}),this.track.addEventListener("mouseleave",()=>this.endDrag()),this.track.addEventListener("mouseup",()=>this.endDrag()),this.track.addEventListener("mousemove",t=>{if(!this.isDown)return;t.preventDefault();let e=(t.pageX-this.track.offsetLeft-this.startX)*2;this.track.scrollLeft=this.scrollLeft-e})}endDrag(){this.isDown=!1,this.track.classList.remove("cursor-grabbing"),this.track.classList.add("scroll-smooth","snap-x"),this.autoplayEnabled&&this.startAutoplay()}};export{r as default};
