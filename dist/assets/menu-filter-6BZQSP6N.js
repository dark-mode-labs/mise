import"./chunk-I63RXT67.js";var r=class{constructor(e){this.bar=e,this.scope=this.bar.closest("[data-filter-scope]"),this.scope&&(this.input=this.bar.querySelector("[data-filter-search]"),this.tagButtons=this.bar.querySelectorAll("[data-filter-tag]"),this.clearBtn=this.scope.querySelector('[data-action="clear-filters"]'),this.emptyState=this.scope.querySelector("#filter-empty-state"),this.navLinks=this.scope.querySelectorAll("[data-filter-nav]"),this.grids=this.scope.querySelectorAll("[data-filter-grid]"),this.items=Array.from(this.scope.querySelectorAll("[data-filter-item]")).map(t=>({element:t,name:t.querySelector("h3, h4").innerText.toLowerCase(),description:t.querySelector(".opacity-70")?.innerText.toLowerCase()||"",tags:t.dataset.tags?t.dataset.tags.split(","):[],section:t.closest("[data-filter-section]")})),this.sections=Array.from(this.scope.querySelectorAll("[data-filter-section]")),this.state={search:"",activeTags:new Set,isFiltering:!1},this.init())}init(){this.input&&this.input.addEventListener("input",e=>{this.state.search=e.target.value.toLowerCase(),this.updateFilteringState(),this.applyFilters()}),this.tagButtons.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.filterTag;this.state.activeTags.has(t)?(this.state.activeTags.delete(t),e.classList.remove("is-active")):(this.state.activeTags.add(t),e.classList.add("is-active")),this.updateFilteringState(),this.applyFilters()})}),this.clearBtn&&this.clearBtn.addEventListener("click",()=>{this.reset()})}updateFilteringState(){this.state.isFiltering=this.state.search.length>0||this.state.activeTags.size>0,this.state.isFiltering&&this.grids.forEach(e=>e.classList.remove("stagger-load"))}reset(){this.state.search="",this.state.activeTags.clear(),this.input&&(this.input.value=""),this.tagButtons.forEach(e=>e.classList.remove("is-active")),this.updateFilteringState(),this.applyFilters()}applyFilters(){let e=0;this.items.forEach(t=>{let s=!this.state.search||t.name.includes(this.state.search)||t.description.includes(this.state.search),i=this.state.activeTags.size===0||[...this.state.activeTags].every(l=>t.tags.includes(l));s&&i?(t.element.style.display="",e++):t.element.style.display="none"}),this.sections.forEach(t=>{let s=t.querySelector('[data-filter-item]:not([style*="display: none"])')!==null;t.style.display=s?"":"none";let i=t.dataset.filterSectionId;if(i){let a=this.scope.querySelector(`[data-filter-nav="${i}"]`);a&&(a.style.display=s?"":"none")}}),this.emptyState&&this.emptyState.classList.toggle("hidden",e>0),window.dispatchEvent(new Event("scroll"))}};export{r as default};
