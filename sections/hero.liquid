{% assign s = section.settings %}
{% assign align_class = s.align_x | append: ' ' | append: s.align_y %}

<section class="section-hero color-{{ s.color_scheme }} relative w-full flex flex-col overflow-hidden {{ s.height }}">
  
  {% comment %} LAYER 1: MEDIA (Z-Index: 10) {% endcomment %}
  <div class="absolute inset-0 z-media bg-body">
    {% if s.bg_image != blank %}
      {% render 'media', src: s.bg_image, fit: 'cover' %}
      <div class="absolute inset-0 pointer-events-none bg-body" 
           style="opacity: {{ s.overlay_opacity | divided_by: 100.0 }};">
      </div>
    {% endif %}
  </div>

  {% comment %} LAYER 2: CONTENT (Z-Index: 20) {% endcomment %}
  {% comment %} 
     The 'align_class' handles standard padding (py-20).
     The inline style adds EXTRA clearance for the pinned marquee if needed.
  {% endcomment %}
  <div class="relative z-content container mx-auto px-4 h-full flex flex-col {{ align_class }} gap-6"
       style="padding-bottom: {{ s.marquee_clearance }}px;">
    {% content_for 'blocks' %}
  </div>

</section>

{% schema %}
{
  "name": "Modular Hero",
  "settings": [
     {
      "type": "header",
      "content": "Theme"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "height",
      "label": "Section Height",
      "options": [
        { "value": "h-auto py-20", "label": "Auto (Fit Content)" },
        { "value": "h-[75vh]", "label": "75% Screen" },
        { "value": "h-screen", "label": "Full Screen" }
      ],
      "default": "h-[75vh]"
    },
    {
      "type": "header",
      "content": "Alignment"
    },
    {
      "type": "select",
      "id": "align_x",
      "label": "Horizontal Alignment",
      "options": [
        { "value": "items-start text-left", "label": "Left" },
        { "value": "items-center text-center", "label": "Center" },
        { "value": "items-end text-right", "label": "Right" }
      ],
      "default": "items-center text-center"
    },
    {
      "type": "select",
      "id": "align_y",
      "label": "Vertical Alignment",
      "options": [
        { "value": "justify-start pt-20 pb-20", "label": "Top" },
        { "value": "justify-center py-20", "label": "Middle" },
        { "value": "justify-end pt-20 pb-20", "label": "Bottom" }
      ],
      "default": "justify-center py-20"
    },
    {
      "type": "header",
      "content": "Safe Area"
    },
    {
      "type": "range",
      "id": "marquee_clearance",
      "label": "Bottom Clearance",
      "info": "Add extra space to clear pinned elements (like Marquee).",
      "min": 0, "max": 200, "step": 5, "default": 0,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Visuals"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "image_picker",
      "id": "bg_image",
      "label": "Background Image"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0, "max": 100, "default": 40
    }
  ],
  "blocks": [
    { "type": "@theme" }
  ],
  "presets": [
    {
      "name": "Hero (Gastropub Launch)",
      "settings": {
        "height": "h-screen",
        "align_x": "items-center text-center",
        "align_y": "justify-center py-20",
        "bg_image": "placeholder-food",
        "color_scheme": "scheme-1",
        "overlay_opacity": 40,
        "marquee_clearance": 80
      },
      "blocks": {
        "hero_logo": {
          "type": "logo",
          "settings": {
            "width": 120
          }
        },
        "spacer_top": {
          "type": "spacer",
          "settings": {
            "height": 20
          }
        },
        "hero_heading": {
          "type": "jumbo-text",
          "settings": {
            "text": "Farm to Table\nExcellence",
            "size": "display",
            "inherit_color": true
          }
        },
        "hero_subtext": {
          "type": "text",
          "settings": {
            "content": "Experience seasonal flavors sourced from local growers. Open daily for dinner and weekend brunch.",
            "size": "body",
            "inherit_color": true
          }
        },
        "spacer_middle": {
          "type": "spacer",
          "settings": {
            "height": 10
          }
        },
        "btn_primary": {
          "type": "button",
          "settings": {
            "label": "Book a Table",
            "link": "/reservations",
            "style": "primary",
            "inherit_style": true
          }
        },
        "btn_secondary": {
          "type": "button",
          "settings": {
            "label": "View Menu",
            "link": "/menu",
            "style": "link",
            "inherit_style": true
          }
        },
        "hero_ticker": {
          "type": "_marquee",
          "settings": {
            "text_list": "Fresh Oysters Daily • Live Jazz Fridays • Happy Hour 5-7pm",
            "speed": 20,
            "inherit_scheme": false,
            "color_scheme": "scheme-2",
            "pin_bottom": true
          }
        }
      },
      "block_order": [
        "hero_logo",
        "spacer_top",
        "hero_heading",
        "hero_subtext",
        "spacer_middle",
        "btn_primary",
        "btn_secondary",
        "hero_ticker"
      ]
    }
  ]
}
{% endschema %}