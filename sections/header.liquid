{% assign s = section.settings %}

{% capture slot_logo %}
    {% content_for 'block', type: '_header-logo', id: 'header-logo' %}
{% endcapture %}

{% capture slot_nav %}
    {% content_for 'block', type: '_header-menu', id: 'header-menu' %}
{% endcapture %}

{% capture slot_actions %}
    {% content_for 'block', type: '_header-actions', id: 'header-actions' %}
{% endcapture %}

{% assign needs_spacer = false %}
{% assign position_class = 'relative' %}
{% if s.sticky_behavior == 'always' or s.sticky_behavior == 'on_scroll_up' %}
  {% assign position_class = 'fixed top-0 w-full' %}
  {% unless s.enable_transparent %}
    {% assign needs_spacer = true %}
  {% endunless %}
{% elsif s.enable_transparent %}
  {% assign position_class = 'absolute top-0 w-full' %}
{% endif %}

<header
  class="header-section {{ position_class }} color-{{ s.color_scheme }} text-body bg-body z-header transition-all duration-300 border-b border-std"
  data-behavior="header"
  data-sticky="{{ s.sticky_behavior }}"
  data-transparent="{{ s.enable_transparent }}"
>
  <div class="wrapper h-16 md:h-24 grid grid-cols-3 items-center">
    <div class="flex items-center justify-start gap-4">
      <button
        type="button"
        class="lg:hidden p-2 -ml-2 text-current hover:opacity-70"
        data-action="toggle-drawer"
        aria-label="Menu"
      >
        {% render 'icon', name: 'menu', class: 'w-6 h-6' %}
      </button>

      {% if s.desktop_layout == 'logo_left' %}
        <div class="mr-8 flex-shrink-0 hidden lg:block">
          {{ slot_logo }}
        </div>
        <div>
          {{ slot_nav }}
        </div>
      {% else %}
        <div>
          {{ slot_nav }}
        </div>
      {% endif %}
    </div>

    <div class="flex items-center justify-center h-full {% if s.desktop_layout == 'logo_left' %}lg:invisible{% endif %}">
      {{ slot_logo }}
    </div>

    <div class="flex items-center justify-end gap-4">
      {{ slot_actions }}
    </div>
  </div>
</header>

{% if needs_spacer %}
  <div class="w-full h-16 md:h-24"></div>
{% endif %}

{% schema %}
{
  "name": "Header",
  "class": "section-header",
  "restriction": { "groups": ["header"] },
  "settings": [
    {
      "type": "select",
      "id": "desktop_layout",
      "label": "Layout (Desktop)",
      "options": [
        { "value": "logo_center", "label": "Logo Center" },
        { "value": "logo_left", "label": "Logo Left" }
      ],
      "default": "logo_center"
    },
    { "type": "header", "content": "Behavior" },
    {
      "type": "select",
      "id": "sticky_behavior",
      "label": "Sticky Mode",
      "options": [
        { "value": "none", "label": "Static" },
        { "value": "always", "label": "Always Sticky" },
        { "value": "on_scroll_up", "label": "Show on Scroll Up" }
      ],
      "default": "always"
    },
    { "type": "checkbox", "id": "enable_transparent", "label": "Transparent on Top", "default": true },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color Palette", "default": "scheme-1" }
  ]
}
{% endschema %}
